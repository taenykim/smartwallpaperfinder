{"ast":null,"code":"var _jsxFileName = \"/Users/taeeunkim/Desktop/taeny/project/smartwallpaperfinder/client/src/App.js\";\nimport React, { Component, Fragment } from \"react\";\nimport \"./App.css\";\nimport search_icon from \"./search_icon.png\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searching_name: \"\",\n      searching_result: \"\",\n      result_arr: [],\n      page: \"&page=\",\n      image_number: 0,\n      page_number: 1,\n      image_max_number: 0,\n      gridmode: 4\n    };\n\n    this.callApi = async () => {\n      const response = await fetch(\"/temp\");\n      const body = await response.json();\n      return body;\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.setState({\n        searching_result: this.state.searching_name,\n        result_arr: [],\n        page: \"&page=\",\n        image_number: 0,\n        page_number: 1,\n        image_max_number: 0\n      }, () => {\n        this.crawling();\n      });\n    };\n\n    this.crawling = async () => {\n      const request = require(\"request\");\n\n      const cheerio = require(\"cheerio\");\n\n      console.log(this.state.searching_result);\n      const options = (await \"https://cors-anywhere.herokuapp.com/https://wall.alphacoders.com/search.php?search=\") + this.state.searching_result + this.state.page;\n      console.log(options);\n\n      const callback = async (error, respons, body) => {\n        console.log(this.state.page);\n        if (error) throw error;\n        const $ = await cheerio.load(body);\n        let json = [],\n            id,\n            link,\n            img;\n        const image_max_number = Number((await $(\"#page_container > h1\").text().split(\" \")[8]));\n\n        if (window.innerWidth < 1070) {\n          $(\"#page_container > div:nth-child(6) > div.thumb-container\").each(function (i, elem) {\n            id = i;\n            link = $(this).find(\"div.thumb-container > a\").attr(\"href\");\n            img = $(this).find(\"div.thumb-container > a.wallpaper-thumb > img\").attr(\"data-src\");\n            json.push({\n              id: id,\n              link: link,\n              img: img\n            });\n          });\n        } else {\n          $(\"#page_container > div:nth-child(6) > div.thumb-container-big\").each(function (i, elem) {\n            id = i;\n            link = $(this).find(\"div.thumb-container > div.boxgrid > a\").attr(\"href\");\n            img = $(this).find(\"div.thumb-container > div.boxgrid > a > img\").attr(\"data-src\");\n            json.push({\n              id: id,\n              link: link,\n              img: img\n            });\n          });\n        }\n\n        console.log(\"json: \", json);\n        console.log(this.state.page);\n\n        if (this.state.image_max_number >= this.state.image_number) {\n          this.setState({\n            result_arr: this.state.result_arr.concat(json),\n            image_max_number: image_max_number,\n            image_number: this.state.image_number + 30\n          });\n        }\n      };\n\n      request(options, callback);\n      console.log(\"이미지맥스넘버\", this.state.image_max_number);\n      console.log(\"이미지넘버\", this.state.image_number);\n      console.log(\"페이지넘버\", this.state.page_number);\n    };\n\n    this._infiniteScroll = () => {\n      let scrollHeight = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n      let scrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n      let clientHeight = document.documentElement.clientHeight;\n\n      if (scrollTop + clientHeight + 100 > scrollHeight && this.state.image_max_number >= this.state.image_number) {\n        this.setState({\n          page_number: this.state.page_number + 1,\n          page: this.state.page.substring(0, 6) + String(this.state.page_number + 1)\n        }, () => this.crawling());\n      } // console.log(scrollTop, clientHeight, scrollHeight);\n\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this._infiniteScroll, true);\n    this.callApi().then(res => console.log(res)).catch(err => console.log(err));\n  }\n\n  render() {\n    const girdStyle2 = {\n      width: \"50%\"\n    };\n    const girdStyle4 = {\n      width: \"25%\"\n    };\n    const girdStyle10 = {\n      width: \"10%\"\n    };\n    return React.createElement(\"div\", {\n      className: \"full_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"page_view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.image_number <= this.state.image_max_number && this.state.image_number + \"/\" + this.state.image_max_number, this.state.image_number > this.state.image_max_number && \"Last\"), React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"button_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"button\",\n      onClick: () => {\n        this.setState({\n          gridmode: 2\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"2\\uAC1C\\uC529\\uBCF4\\uAE30\"), React.createElement(\"div\", {\n      className: \"button\",\n      onClick: () => {\n        this.setState({\n          gridmode: 4\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"4\\uAC1C\\uC529\\uBCF4\\uAE30\"), React.createElement(\"div\", {\n      className: \"button\",\n      onClick: () => {\n        this.setState({\n          gridmode: 10\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"10\\uAC1C\\uC529\\uBCF4\\uAE30\")), React.createElement(\"div\", {\n      className: \"main_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"SMART WALLPAPER FINDER\"), React.createElement(\"div\", {\n      className: \"main_subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"FROM\", \" \", React.createElement(\"a\", {\n      className: \"main_site_link\",\n      href: \"https://wall.alphacoders.com/\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"alphacoders.com\")), React.createElement(\"div\", {\n      className: \"search_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: search_icon,\n      id: \"search_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      className: \"search_form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"search_input\",\n      autoFocus: true,\n      name: \"searching_name\",\n      type: \"text\",\n      placeholder: \"Enter the keyword to find\",\n      onChange: this.handleChange,\n      value: this.state.searching_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"dev-ment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"\\uB370\\uC2A4\\uD06C\\uD0D1 \\uC774\\uC6A9 \\uC2DC, width\\uAC00 1070 \\uC774\\uC0C1\\uC774\\uC5B4\\uC57C \\uC6D0\\uD65C\\uD55C \\uC0AC\\uC6A9\\uC774 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\")), React.createElement(\"div\", {\n      className: \"grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, this.state.gridmode === 2 && this.state.result_arr.map(item => {\n      return React.createElement(\"a\", {\n        href: \"https://wall.alphacoders.com/\" + item.link,\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: girdStyle2,\n        src: item.img,\n        className: \"grid-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }));\n    }), this.state.gridmode === 4 && this.state.result_arr.map(item => {\n      return React.createElement(\"a\", {\n        href: \"https://wall.alphacoders.com/\" + item.link,\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: girdStyle4,\n        src: item.img,\n        className: \"grid-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }));\n    }), this.state.gridmode === 10 && this.state.result_arr.map(item => {\n      return React.createElement(\"a\", {\n        href: \"https://wall.alphacoders.com/\" + item.link,\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: girdStyle10,\n        src: item.img,\n        className: \"grid-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }));\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/taeeunkim/Desktop/taeny/project/smartwallpaperfinder/client/src/App.js"],"names":["React","Component","Fragment","search_icon","App","state","searching_name","searching_result","result_arr","page","image_number","page_number","image_max_number","gridmode","callApi","response","fetch","body","json","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","crawling","request","require","cheerio","console","log","options","callback","error","respons","$","load","id","link","img","Number","text","split","window","innerWidth","each","i","elem","find","attr","push","concat","_infiniteScroll","scrollHeight","Math","max","document","documentElement","scrollTop","clientHeight","substring","String","componentDidMount","addEventListener","then","res","catch","err","render","girdStyle2","width","girdStyle4","girdStyle10","map","item"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport \"./App.css\";\nimport search_icon from \"./search_icon.png\";\n\nclass App extends Component {\n  state = {\n    searching_name: \"\",\n    searching_result: \"\",\n    result_arr: [],\n    page: \"&page=\",\n    image_number: 0,\n    page_number: 1,\n    image_max_number: 0,\n    gridmode: 4\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this._infiniteScroll, true);\n    this.callApi()\n      .then(res => console.log(res))\n      .catch(err => console.log(err));\n  }\n\n  callApi = async () => {\n    const response = await fetch(\"/temp\");\n    const body = await response.json();\n    return body;\n  };\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.setState(\n      {\n        searching_result: this.state.searching_name,\n        result_arr: [],\n        page: \"&page=\",\n        image_number: 0,\n        page_number: 1,\n        image_max_number: 0\n      },\n      () => {\n        this.crawling();\n      }\n    );\n  };\n\n  crawling = async () => {\n    const request = require(\"request\");\n    const cheerio = require(\"cheerio\");\n    console.log(this.state.searching_result);\n    const options =\n      (await \"https://cors-anywhere.herokuapp.com/https://wall.alphacoders.com/search.php?search=\") +\n      this.state.searching_result +\n      this.state.page;\n    console.log(options);\n    const callback = async (error, respons, body) => {\n      console.log(this.state.page);\n      if (error) throw error;\n      const $ = await cheerio.load(body);\n      let json = [],\n        id,\n        link,\n        img;\n      const image_max_number = Number(\n        await $(\"#page_container > h1\")\n          .text()\n          .split(\" \")[8]\n      );\n      if (window.innerWidth < 1070) {\n        $(\"#page_container > div:nth-child(6) > div.thumb-container\").each(\n          function(i, elem) {\n            id = i;\n            link = $(this)\n              .find(\"div.thumb-container > a\")\n              .attr(\"href\");\n            img = $(this)\n              .find(\"div.thumb-container > a.wallpaper-thumb > img\")\n              .attr(\"data-src\");\n            json.push({ id: id, link: link, img: img });\n          }\n        );\n      } else {\n        $(\"#page_container > div:nth-child(6) > div.thumb-container-big\").each(\n          function(i, elem) {\n            id = i;\n            link = $(this)\n              .find(\"div.thumb-container > div.boxgrid > a\")\n              .attr(\"href\");\n            img = $(this)\n              .find(\"div.thumb-container > div.boxgrid > a > img\")\n              .attr(\"data-src\");\n            json.push({ id: id, link: link, img: img });\n          }\n        );\n      }\n\n      console.log(\"json: \", json);\n      console.log(this.state.page);\n      if (this.state.image_max_number >= this.state.image_number) {\n        this.setState({\n          result_arr: this.state.result_arr.concat(json),\n          image_max_number: image_max_number,\n          image_number: this.state.image_number + 30\n        });\n      }\n    };\n    request(options, callback);\n    console.log(\"이미지맥스넘버\", this.state.image_max_number);\n    console.log(\"이미지넘버\", this.state.image_number);\n    console.log(\"페이지넘버\", this.state.page_number);\n  };\n\n  _infiniteScroll = () => {\n    let scrollHeight = Math.max(\n      document.documentElement.scrollHeight,\n      document.body.scrollHeight\n    );\n    let scrollTop = Math.max(\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n    let clientHeight = document.documentElement.clientHeight;\n    if (\n      scrollTop + clientHeight + 100 > scrollHeight &&\n      this.state.image_max_number >= this.state.image_number\n    ) {\n      this.setState(\n        {\n          page_number: this.state.page_number + 1,\n          page:\n            this.state.page.substring(0, 6) + String(this.state.page_number + 1)\n        },\n        () => this.crawling()\n      );\n    }\n    // console.log(scrollTop, clientHeight, scrollHeight);\n  };\n\n  render() {\n    const girdStyle2 = {\n      width: \"50%\"\n    };\n    const girdStyle4 = {\n      width: \"25%\"\n    };\n    const girdStyle10 = {\n      width: \"10%\"\n    };\n\n    return (\n      <div className=\"full_container\">\n        <div className=\"page_view\">\n          {this.state.image_number <= this.state.image_max_number &&\n            this.state.image_number + \"/\" + this.state.image_max_number}\n          {this.state.image_number > this.state.image_max_number && \"Last\"}\n        </div>\n        <div className=\"main\">\n          <div className=\"button_container\">\n            <div\n              className=\"button\"\n              onClick={() => {\n                this.setState({\n                  gridmode: 2\n                });\n              }}\n            >\n              2개씩보기\n            </div>\n            <div\n              className=\"button\"\n              onClick={() => {\n                this.setState({\n                  gridmode: 4\n                });\n              }}\n            >\n              4개씩보기\n            </div>\n            <div\n              className=\"button\"\n              onClick={() => {\n                this.setState({\n                  gridmode: 10\n                });\n              }}\n            >\n              10개씩보기\n            </div>\n          </div>\n          <div className=\"main_title\">SMART WALLPAPER FINDER</div>\n          <div className=\"main_subtitle\">\n            FROM{\" \"}\n            <a\n              className=\"main_site_link\"\n              href=\"https://wall.alphacoders.com/\"\n              target=\"_blank\"\n            >\n              alphacoders.com\n            </a>\n          </div>\n          <div className=\"search_container\">\n            <img src={search_icon} id=\"search_icon\"></img>\n            <form className=\"search_form\" onSubmit={this.handleSubmit}>\n              <input\n                className=\"search_input\"\n                autoFocus\n                name=\"searching_name\"\n                type=\"text\"\n                placeholder=\"Enter the keyword to find\"\n                onChange={this.handleChange}\n                value={this.state.searching_name}\n              ></input>\n            </form>\n          </div>\n          <div className=\"dev-ment\">\n            데스크탑 이용 시, width가 1070 이상이어야 원활한 사용이 가능합니다.\n          </div>\n        </div>\n        {/* <div className=\"contents\">{JSON.stringify(this.state.result_arr)}</div> */}\n        <div className=\"grid\">\n          {this.state.gridmode === 2 &&\n            this.state.result_arr.map(item => {\n              return (\n                <a\n                  href={\"https://wall.alphacoders.com/\" + item.link}\n                  target=\"_blank\"\n                >\n                  <img\n                    style={girdStyle2}\n                    src={item.img}\n                    className=\"grid-item\"\n                  ></img>\n                </a>\n              );\n            })}\n          {this.state.gridmode === 4 &&\n            this.state.result_arr.map(item => {\n              return (\n                <a\n                  href={\"https://wall.alphacoders.com/\" + item.link}\n                  target=\"_blank\"\n                >\n                  <img\n                    style={girdStyle4}\n                    src={item.img}\n                    className=\"grid-item\"\n                  ></img>\n                </a>\n              );\n            })}\n          {this.state.gridmode === 10 &&\n            this.state.result_arr.map(item => {\n              return (\n                <a\n                  href={\"https://wall.alphacoders.com/\" + item.link}\n                  target=\"_blank\"\n                >\n                  <img\n                    style={girdStyle10}\n                    src={item.img}\n                    className=\"grid-item\"\n                  ></img>\n                </a>\n              );\n            })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}